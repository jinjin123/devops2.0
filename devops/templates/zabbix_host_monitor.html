{% extends "index.html" %}
{% block meta %}
    <script type="text/javascript" src="/static/vendor/js/radialIndicator.min.js"></script>
<!-- Morris Charts JavaScript -->
    <!-- <script type="text/javascript" src="/static/vendor/js/raphael.min.js"></script> -->
    <!-- <script type="text/javascript" src="/static/vendor/js/morris.min.js"></script> -->

<!-- bootstrap  table  -->
    <!-- <link rel="stylesheet" href="/static/vendor/css/bootstrap-select.css">
    <link rel="stylesheet" href="/static/vendor/css/dataTables.bootstrap.css">
    <link rel="stylesheet" href="/static/vendor/css/dataTables.responsive.css">
    <script src="/static/vendor/js/bootstrap-select.js"></script>
    <script src="/static/vendor/js/jquery.dataTables.min.js"></script>
    <script src="/static/vendor/js/dataTables.bootstrap.min.js"></script>
    <script src="/static/vendor/js/dataTables.responsive.js"></script>
    <script src="/static/vendor/js/jquery.flot.tooltip.min.js"></script> -->
    <!-- Echat JavaScript -->
    <!-- <script type="text/javascript" src="/static/vendor/js/echarts.js"></script> -->

    <style type="text/css">
    *{margin:0;padding:0;list-style-type:none;}
    a,img{border:0;cursor: hand}
    body{font:12px/180% Arial, Helvetica, sans-serif, "新宋体";background:#ddd; overflow: hidden;}
/* leftsead */
    #leftsead{width:131px;height:143px;position:fixed;top:600px;right:0px;z-index: 100;}
    *html #leftsead{margin-top:258px;position:absolute;}
    #leftsead li{width:131px;height:53px;}
    #leftsead li img{float:right;border-bottom-left-radius:5px;border-top-left-radius:5px;}
    #leftsead li a{height:49px;float:right;display:block;min-width:47px;max-width:131px;}
    #leftsead li a .shows{display:block;}
    #leftsead li a .hides{margin-right:-166px;}
    #leftsead li a.youhui .hides{display:none;position:absolute;right:215px;top:-111px;width:200px;}
    .glyphicon {top:-1px;}
    .col-lg-12{
      width: 95%;
      margin-left: 25px;
      margin-top: 50px;
    }
    </style>
{% endblock %}


	<header class="cd-main-header">
        {% block ext %}
{#   loadding  pic     #}
        <div id="loadPic"
             style="text-align: center;padding: 10px;color: white;font-weight:bold   ;border-radius:8px;background: rgba(0,0,0,0.5);z-index: 1004;width: 200px;height:40px;margin:auto;position:fixed;top:0px;bottom:0px;right:0px;left:0px;display: none;">
            <i class="fa fa-refresh fa-spin"></i>
            <span style="letter-spacing: 4px;">请稍后...</span>
        </div>
{#    loadding end     #}

{#   upload plugins     #}
        <div id="uploadScriptProgressDiv" class="progress progress-striped" style="font-weight: bold;font-size: 500%;z-index: 1004;width:40%;height:5%;margin:auto;position:fixed;top:0%;bottom:0%;right:0px;left:120%;display: block;">
            <div id="showScriptProgressText" class="progress-bar  progress-bar-success active">
            </div>
        </div>
            {% endblock %}
	</header> <!-- .cd-main-header -->

    <div id="leftsead">
    	<ul>
            {# 其实可以将通知，邮件都放到这里来，后面在考虑吧  #}
{#	     <li>#}
{#			<a id="top_btn">#}
{#				<img src="../static/img/foot03/ll06.png" width="47" height="49" class="hides"/>#}
{#				<img src="../static/img/foot03/l06.png" width="47" height="49" class="shows" />#}
{#			</a>#}
{#		</li>#}

		<li>
			<a href="">
				<img src="../static/img/foot03/ll03.png"  width="47" height="49" class="hides"/>
				<img src="../static/img/foot03/l03.png" width="47" height="49" class="shows" />
			</a>
		</li>
            {# 增加微信聊天求助websocket#}
{#            <li>#}
{#                <a href="">#}
{#                  <img src="../static/img/foot03/ll02.png" width="166" height="49" class="hides"/>#}
{#                  <img src="../static/img/foot03/l04.png" width="47" height="49" class="shows" />#}
{#                </a>#}
{#            </li>#}
		    <li>
			    <a class="youhui">
				    <img src="../static/img/foot03/l02.png" width="47" height="49" class="shows" />
			    	<img src="../static/img/foot03/qrcode.jpg" width="196" height="205" class="hides" usemap="#taklhtml"/>
		    	</a>
	    	</li>
            <li>
			    <a class="youhui">
				    <img src="../static/img/foot03/l02.png" width="47" height="49" class="shows" />
			    	<img src="../static/img/foot03/qrcode.jpg" width="196" height="205" class="hides" usemap="#taklhtml"/>
		    	</a>
	    	</li>
    	</ul>
    </div><!--leftsead end-->
{% block content %}
    <main class="cd-main">
      <section class="cd-section PushCode visible">
        <div id="index-content" class="cd-content" style="margin:0 0 0 -90px">
          <div style="background:white;width:97%;margin:20px 0 40px 5px;position:absolute;bottom:0%;z-index:1000;height: 100%;overflow:auto">
            <div class="row">
              <div class="col-lg-12">
                <div class="panel panel-default" style="height:35%">
                  <div class="panel-heading">
                    主机简介
                  </div>
                    <div class="col-lg-4">
                        <legend>当前时间</legend>
                      <div class="panel panel-default" style="height:55%">
                      </div>
                    </div>
                    <div class="col-lg-4">
                        <legend>主机名称</legend>
                      <div class="panel panel-default" style="height:55%">
                      </div>
                    </div>
                    <div class="col-lg-4">
                        <legend>系统运行时间</legend>
                      <div class="panel panel-default" style="height:55%">
                      </div>
                    </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <div class="panel panel-default" style="height:35%">
                  <div class="panel-heading">
                    资源利用率
                  </div>
                    <div class="col-lg-4">
                        <legend>CPU利用率</legend>
                      <!-- <div class="panel panel-default" style="height:55%"> -->
                      <!-- </div> -->
                      <div id="cpu"></div>
                    </div>
                    <div class="col-lg-4">
                        <legend>内存利用率</legend>
                      <div id="mem"></div>
                      <!-- <div class="panel panel-default" style="height:55%"> -->
                      <!-- </div> -->
                    </div>
                    <div class="col-lg-4">
                        <legend>磁盘利用率</legend>
                      <div id="disk"></div>
                      <!-- <div class="panel panel-default" style="height:55%"> -->
                      <!-- </div> -->
                    </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <div class="panel panel-default" style="height:400px">
                  <div class="panel-heading">
                    cpu监控
                  </div>
                    <div class="col-lg-4">
                      <!-- <div class="panel panel-default" style="height:55%"> -->
                      <!-- </div> -->
                      <div id="cpu_detail" class="newChart" style="width:1150px;height:350px"></div>
                    </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <div class="panel panel-default" style="height:400px">
                  <div class="panel-heading">
                    memory监控
                  </div>
                    <div class="col-lg-4">
                      <!-- <div class="panel panel-default" style="height:55%"> -->
                      <!-- </div> -->
                      <div id="mem_detail" class="newChart" style="width:1150px;height:350px"></div>
                    </div>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-12">
                <div class="panel panel-default" style="height:400px">
                  <div class="panel-heading">
                    disk监控
                  </div>
                    <div class="col-lg-4">
                      <!-- <div class="panel panel-default" style="height:55%"> -->
                      <!-- </div> -->
                      <div id="disk_detail" class="newChart" style="width:1150px;height:350px"></div>
                    </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>
    <div id="cd-loading-bar" data-scale="1" class="index" style=""></div>
    {% endblock %}

{% block footer %}
    <!-- <script src="/static/js/zabbix_host_list.js"></script> -->
    <script src="/static/js/auto-line-number.js"></script>
    <script src="/static/js/highcharts.js"></script>
    <script src="/static/js/headimg.js"></script>
    <script src="/static/js/jquery.menu-aim.js"></script>
    <script src="/static/js/rightpg.js"></script> <!-- Resource $ -->
    <script src="/static/js/sidebar-menu.js"></script> <!-- Resource $ -->
    <script src="/static/js/velocity.min.js"></script>
    <script>
    $.sidebarMenu($('.sidebar-menu'))
    $('#cpu').radialIndicator({
            barColor: '#87CEEB',
            barWidth: 10,
            initValue: 40,
            roundCorner : true,
            percentage: true
        });
        $('#disk').radialIndicator({
                barColor: '#87CEEB',
                barWidth: 10,
                initValue: 40,
                roundCorner : true,
                percentage: true
            });
            $('#mem').radialIndicator({
                    barColor: '#87CEEB',
                    barWidth: 10,
                    initValue: 40,
                    roundCorner : true,
                    percentage: true
                });
    </script>
    <script >
      $(function(){
        var commonOptions = {
          // colors: ['#f68936', '#70ba47', '#33b5e6', '#fd8f40', '#e7ca60', '#40abaf', '#f6f7f8', '#e9e9eb'],
          global: {
            useUTC: false
          },
          chart: {
            style: {
              fontFamily: 'Roboto Light',
              fontWeight: 'normal',
              fontSize: '12px',
              color: '#585858',
            }
          },
          title: {
            text: null
            // text: '内存使用情况(MB)'
          },
          subtitle: {
            text: null
          },
          credits: {
            enabled: false
          },
          xAxis: {
            title: {
              style: {
                fontFamily: 'Roboto',
                color: "#bbb",
              }
            },
            labels: {
              style:{ color: '#bbb' },
            },
            //刻度标志
            tickWidth:1,
            lineWidth: 1
            // tickLength: 1,
          },

          // Area Chart
          plotOptions: {
            series: {
              fillOpacity: 0.1
            },
            area: {
              lineWidth: 1,
              marker: {
                lineWidth: 2,
                symbol: 'circle',
                fillColor: 'white',
                radius:3,
              },
              legend: {
                radius: 2,
              }
            }
          },
          tooltip: {
            useHTML: true,
            shared: true,
            backgroundColor: '#5f5f5f',
            borderWidth: 0,
            style: {
              padding:10,
              color: '#fefefe',
            }
          },
          legend: {
            itemStyle: {
              fontFamily: 'Roboto Light',
              fontWeight: 'normal',
              fontSize: '12',
              color: '#666666',
            },
            marker: {
              symbol: 'square',
              verticalAlign: 'middle',
              radius: '4',
            },
            symbolHeight: 6,
            symbolWidth: 6,
          },
        };

        var chart = null;
        $.getJSON(zabbixcpu + '10084', function (data) {
          console.log(data);
            chart = Highcharts.chart('cpu_detail', {
                global: {
                  useUTC: false
                },
                chart: {
                    zoomType: 'x'
                },
                title: {
                    text: 'cpu监控',
                },
                subtitle: {
                    text: null,
                },
                //去水印
                credits: {
                      enabled: false
                },
                xAxis: {
                    type: 'datetime',
                    dateTimeLabelFormats: {
                         millisecond: '%Y-%m-%d %H:%M:%S',
                         second: '%Y-%m-%d %H:%M:%S',
                         minute: '%Y-%m-%d %H:%M:%S',
                         hour: '%Y-%m-%d %H:%M:%S',
                         day: '%Y-%m-%d %H:%M:%S',
                         month: '%Y-%m-%d %H:%M:%S',
                         year: '%Y-%m-%d %H:%M:%S'
                     }
                },
                legend: {
                    align: 'left',
                    verticalAlign: 'top',
                    y: 0,
                    floating: true,
                    borderWidth: 0
                },
                tooltip: {
                  xDateFormat:'%Y-%m-%d %H:%M:%S '
                },
                yAxis: {
                    title: {
                        text: null,
                    }
                },
                // legend: {
                //     enabled: false
                // },
                plotOptions: {
                    area: {
                        fillColor: {
                            linearGradient: {
                                x1: 0,
                                y1: 0,
                                x2: 0,
                                y2: 1
                            },
                            stops: [
                                [0, Highcharts.getOptions().colors[0]],
                                [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                            ]
                        },
                        marker: {
                            radius: 2
                        },
                        lineWidth: 1,
                        states: {
                            hover: {
                                lineWidth: 1
                            }
                        },
                        threshold: null
                    }
                },
                series: [{
                    type: 'area',
                    name: 'cpu利用率',
                    data: data
                }]
            });
        });
        Highcharts.setOptions({
          global: {
            useUTC: false
          }
        });
        var chart = null;
        $.getJSON(zabbixmemory + '10084', function (data) {
          console.log(data);
            chart = Highcharts.chart('mem_detail', {
                chart: {
                    zoomType: 'x'
                },
                title: {
                    text: 'memory监控',
                },
                subtitle: {
                    text: null,
                },
                //去水印
                credits: {
                      enabled: false
                },
                xAxis: {
                    type: 'datetime',
                    title: null,
                    type: 'datetime',
                    dateTimeLabelFormats: {
                         millisecond: '%Y-%m-%d %H:%M:%S',
                         second: '%Y-%m-%d %H:%M:%S',
                         minute: '%Y-%m-%d %H:%M:%S',
                         hour: '%Y-%m-%d %H:%M:%S',
                         day: '%Y-%m-%d %H:%M:%S',
                         month: '%Y-%m-%d %H:%M:%S',
                         year: '%Y-%m-%d %H:%M:%S'
                     }
                },
                legend: {
                    align: 'left',
                    verticalAlign: 'top',
                    y: 0,
                    floating: true,
                    borderWidth: 0
                },
                tooltip: {
                  xDateFormat:'%Y-%m-%d %H:%M:%S '
                },
                yAxis: {
                    title: {
                        text: null,
                    }
                },
                // legend: {
                //     enabled: false
                // },
                plotOptions: {
                    area: {
                        fillColor: {
                            linearGradient: {
                                x1: 0,
                                y1: 0,
                                x2: 0,
                                y2: 1
                            },
                            stops: [
                                [0, Highcharts.getOptions().colors[0]],
                                [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                            ]
                        },
                        marker: {
                            radius: 2
                        },
                        lineWidth: 1,
                        states: {
                            hover: {
                                lineWidth: 1
                            }
                        },
                        threshold: null
                    }
                },
                series: [{
                    type: 'area',
                    name: '可用内存(G)',
                    data: data
                }]
            });
        });
        $.getJSON(zabbixdisk + '10084' , function (data) {
            chart = Highcharts.chart('disk_detail', {
                global: {
                  useUTC: false
                },
                chart: {
                    zoomType: 'x'
                },
                title: {
                    text: 'disk监控',
                },
                subtitle: {
                    text: null,
                },
                //去水印
                credits: {
                      enabled: false
                },
                xAxis: {
                    type: 'datetime',
                    title: null,
                    type: 'datetime',
                    dateTimeLabelFormats: {
                         millisecond: '%Y-%m-%d %H:%M:%S',
                         second: '%Y-%m-%d %H:%M:%S',
                         minute: '%Y-%m-%d %H:%M:%S',
                         hour: '%Y-%m-%d %H:%M:%S',
                         day: '%Y-%m-%d %H:%M:%S',
                         month: '%Y-%m-%d %H:%M:%S',
                         year: '%Y-%m-%d %H:%M:%S'
                     },
                },
                legend: {
                    align: 'left',
                    verticalAlign: 'top',
                    //图例偏移位置　
                    y: 0,
                    floating: true,
                    borderWidth: 0
                },
                tooltip: {
                  xDateFormat:'%Y-%m-%d %H:%M:%S '
                },
                yAxis: {
                    title: {
                        text: null
                    }
                },
                plotOptions: {
                    area: {
                        fillColor: {
                            linearGradient: {
                                x1: 0,
                                y1: 0,
                                x2: 0,
                                y2: 1
                            },
                            stops: [
                                [0, Highcharts.getOptions().colors[0]],
                                [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                            ]
                        },
                        marker: {
                            radius: 2
                        },
                        lineWidth: 1,
                        states: {
                            hover: {
                                lineWidth: 1
                            }
                        },
                        threshold: null
                    }
                },
                series: [{
                    type: 'area',
                    name: '剩余磁盘空间(G)',
                    data: data
                }]
            });
        });
      })
    </script>
{% endblock %}
